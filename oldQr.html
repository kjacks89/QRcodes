<!--
  - QR Code generator demo (HTML+JavaScript)
  - 
  - Copyright (c) Project Nayuki. (MIT License)
  - https://www.nayuki.io/page/qr-code-generator-library
  - 
  - Permission is hereby granted, free of charge, to any person obtaining a copy of
  - this software and associated documentation files (the "Software"), to deal in
  - the Software without restriction, including without limitation the rights to
  - use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
  - the Software, and to permit persons to whom the Software is furnished to do so,
  - subject to the following conditions:
  - * The above copyright notice and this permission notice shall be included in
  -   all copies or substantial portions of the Software.
  - * The Software is provided "as is", without warranty of any kind, express or
  -   implied, including but not limited to the warranties of merchantability,
  -   fitness for a particular purpose and noninfringement. In no event shall the
  -   authors or copyright holders be liable for any claim, damages or other
  -   liability, whether in an action of contract, tort or otherwise, arising from,
  -   out of or in connection with the Software or the use or other dealings in the
  -   Software.
  -->
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>QR Code Generator</title>
	<style type="text/css">
	html {
		font-family: sans-serif;
	}
	span {
		margin: 1.5em;
	}
	@media print {
		.noprint 
		{
			visibility: hidden;
		}
	}
	td {
		vertical-align: top;
		padding-top: 0.2em;
		padding-bottom: 0.2em;
	}
	td:first-child {
		white-space: pre;
		padding-right: 0.5em;
	}
	/*input[type=radio], input[type=checkbox] {
		margin: 0em;
		padding: 0em;
	}
	input[type=radio] + label, input[type=checkbox] + label {
		margin-right: 0.8em;
		padding-left: 0.2em;
	}*/
	</style>
</head>

<body>
	<script>
		function addCodes(){
			var svg1 = document.getElementById("qrcode-svg");  
			var svg2 = document.getElementById("qrcode-svg2");
			var newSVG1 = svg1.cloneNode(true);
			var textInput = document.getElementById("text-input").value;
			if (textInput.length < 4) {
				alert("Error: Please type full printer name then click Submit");		
			}
			else {
				document.body.appendChild(newSVG1);
				var newSVG2 = svg2.cloneNode(true);
				document.body.appendChild(newSVG2);
				var span = document.createElement("span");
				document.body.appendChild(span);
			}
		}
	</script>

	<h1 class='noprint'>QR Code Generator Prototype</h1>
	<form action="#" method="get" onsubmit="return false" class='noprint'>
		<table class="noborder" style="width:100%">
			<tbody>
				<tr>
					<td><strong>Type printer name:</strong></td>
					<td style="width:100%"><textarea placeholder="" id="text-input" style="width:80%; max-width:30em; height:5em; font-family:inherit"></textarea></td>
				</tr>
				<tr>
					<td><strong>Verify QR code then click Submit:</strong></td>
					<td>
						<canvas id="qrcode-canvas" style="padding:1em; background-color:#E8E8E8"></canvas>
						<svg id="qrcode-svg" style="width:6em; height:6em; padding:1em; background-color:#E8E8E8">
							<rect width="100%" height="100%" fill="#FFFFFF" stroke-width="0"></rect>
							<text text-anchor="middle" dominant-baseline="middle" id="qrLabel1" x="50%" y="5%" font-size="15%"></text>
							<text text-anchor="middle" dominant-baseline="middle" id="qrLabel2" x="50%" y="90%" font-size="15%"></text>
							<path d="" fill="#000000" stroke-width="0"></path>
						</svg>
						<canvas id="qrcode-canvas2" style="padding:1em; background-color:#E8E8E8"></canvas>
						<svg id="qrcode-svg2" style="width:6em; height:6em; padding:1em; background-color:#E8E8E8">
							<rect width="100%" height="100%" fill="#FFFFFF" stroke-width="0"></rect>
							<text text-anchor="middle" dominant-baseline="middle" id="qrLabel3" x="50%" y="5%" font-size="15%"></text>
							<text text-anchor="middle" dominant-baseline="middle" id="qrLabel4" x="50%" y="90%" font-size="15%"></text>
							<path d="" fill="#000000" stroke-width="0"></path>
						</svg> 
					</td>
				</tr>
			</tbody>
		</table>
		<input type="submit" class='noprint' value="Submit" onclick="addCodes()">
		<br><br><strong class='noprint'>Below are the submitted QR codes that will be printed:</strong>
	</form>
		<br><button onclick="print()" class='noprint'>Print</button><br><br>
		<script> 
			function print(){
				var svgList = document.querySelectorAll("svg");
				if (svgList.length > 2){
					var printWindow = window.open("", "Print QR Codes", "toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=1000,height=1000,top="+(screen.height-400)+",left="+(screen.width-840));
					printWindow.document.title = "Print QR Codes";
					var i;
					var span = printWindow.document.createElement("span");
					for (i = 2; i < svgList.length; i++) {
						console.log(i);
						printWindow.document.body.appendChild(svgList[i].cloneNode(true));
						printWindow.document.body.appendChild(span);
					}
					printWindow.print();
					printWindow.close();
				}
				else{
					alert("Error: Please submit QR codes before printing");
				}
			}
		</script>	
	<script type="application/javascript" src="qrcodegen.js"></script>
	<script type="application/javascript" src="qrcodegen-demo.js"></script>
</body>
</html>




